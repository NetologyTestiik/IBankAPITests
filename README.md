Тестирование API Интернет-Банка

Описание задачи
Тестирование API создания пользователей через endpoint /api/system/users в тестовом режиме.

API Specification
text
POST /api/system/users
Content-Type: application/json

{
    "login": "vasya",
    "password": "password", 
    "status": "active"  // "active" или "blocked"
}
Возможные значения статуса:

active — пользователь активен

blocked — пользователь заблокирован

Особенности:

Возвращает код 200 при успешном создании

При повторной передаче пользователя с таким же логином выполняется перезапись данных

Структура проекта
text
IBankAPITests/
├── build.gradle                          # Конфигурация Gradle
├── gradlew                              # Gradle wrapper (Unix)
├── gradlew.bat                          # Gradle wrapper (Windows)
├── src/
│   ├── main/java/ru/netology/Main.java  # Главный класс (заглушка)
│   └── test/java/ru/netology/
│       ├── dto/RegistrationDto.java     # Data Transfer Object
│       ├── utils/UserGenerator.java     # Утилита генерации пользователей
│       └── tests/                       # Тестовые классы
│           ├── BasicApiTests.java       # Базовые сценарии API
│           ├── UserRegistrationTests.java # Тесты регистрации
│           └── StatusTransitionTests.java # Тесты смены статуса
├── build/reports/tests/test/            # Отчеты тестирования
└── README.md                            # Эта документация
Быстрый старт
1. Подготовка окружения
bash
# Клонировать/скачать проект
# Убедиться, что установлены:
# - Java 11+
# - Приложение интернет-банка (app-ibank.jar)
2. Запуск сервера
bash
# Запустить приложение интернет-банка в тестовом режиме
java -jar app-ibank.jar -P:profile=test
3. Запуск тестов
bash
# Сборка проекта
./gradlew build

# Запуск всех тестов
./gradlew test

# Запуск конкретного тестового класса
./gradlew test --tests "ru.netology.tests.BasicApiTests"
4. Просмотр отчетов
После запуска тестов отчеты доступны по пути:
build/reports/tests/test/index.html

Тестовые сценарии
BasicApiTests
shouldCreateActiveUser() - создание активного пользователя

shouldCreateBlockedUser() - создание заблокированного пользователя

shouldOverwriteUserWithSameLogin() - перезапись пользователя

UserRegistrationTests
shouldCreateMultipleUsers() - массовое создание пользователей

shouldAcceptVariousLoginFormats() - различные форматы логина

shouldAcceptVariousPasswordFormats() - различные форматы пароля

StatusTransitionTests
shouldChangeUserStatusFromActiveToBlocked() - смена статуса

shouldUpdatePasswordForExistingUser() - обновление пароля

Покрытие тестирования
Комбинаторика из задания:
Наличие пользователя ✅

Создание нового пользователя

Перезапись существующего

Статус пользователя ✅

active (активный)

blocked (заблокированный)

Смена статуса

Валидация логина ✅

Простые логины

Логины с дефисами, точками, подчеркиваниями

Логины с цифрами

Валидация пароля ✅

Простые пароли

Пароли с цифрами

Пароли со специальными символами

Пароли с пробелами

Зависимости
Проект использует:

Java 11+

Gradle 8.5+

JUnit Jupiter 5.9.2 - тестовый фреймворк

REST Assured 5.5.0 - тестирование REST API

Gson 2.10.1 - сериализация JSON

Lombok 1.18.30 - сокращение boilerplate кода

Оценка времени
Ручное тестирование: 120-150 минут
Подготовка тестовых данных: 20 мин

Проверка сценариев в Postman: 40 мин

Граничные случаи: 40 мин

Документирование: 20 мин

Повторное тестирование: 10-30 мин

Автоматизация: 90-120 минут
Настройка проекта: 20 мин

Создание тестовых классов: 40 мин

Написание тестов: 30 мин

Отладка и исправление: 10-30 мин

Выгода автоматизации:
Повторное использование - тесты можно запускать много раз

Скорость - все тесты за 5 секунд vs 2 часа вручную

Надежность - исключение человеческого фактора

Документирование - тесты как документация API

Известные особенности
API может возвращать 200 даже для некоторых невалидных данных

Перезапись пользователя происходит без подтверждения

Нет валидации длины полей на стороне API

Логирование
Тесты настроены с подробным логированием:

Заголовки запросов

Тела запросов в JSON

Статус коды ответов

Тела ответов

Устранение неполадок
Проблема: Порт 9999 занят
bash
# Найти процесс
netstat -ano | findstr :9999

# Остановить процесс (если это старое приложение)
taskkill /PID <PID> /F
Проблема: Ошибка сборки
bash
# Очистить и пересобрать
./gradlew clean build

# Смотреть подробные логи
./gradlew test --info
Авторы
Проект создан в рамках учебного задания по автоматизации тестирования.

Лицензия
Учебный проект.

